{"ast":null,"code":"import React,{useEffect,useState}from'react';import API from'../api';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UsersManagement(){const[users,setUsers]=useState([]);useEffect(()=>{API.get('/users').then(r=>setUsers(r.data)).catch(e=>console.error(e));},[]);const addUser=async()=>{const name=prompt('Name');if(!name)return;const email=prompt('Email');if(!email)return;const pwd=prompt('Password');if(!pwd)return;const role=prompt('Role (admin/user)','user');await API.post('/users',{name,email,password:pwd,role});const r=await API.get('/users');setUsers(r.data);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Management\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success mb-3\",onClick:addUser,children:\"Add User\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(u=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:u.name}),/*#__PURE__*/_jsx(\"td\",{children:u.email}),/*#__PURE__*/_jsx(\"td\",{children:u.role}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/users/edit/\".concat(u._id),className:\"btn btn-sm btn-primary me-2\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:async()=>{if(!window.confirm('Delete user?'))return;await API.delete(\"/users/\".concat(u._id));setUsers(users.filter(x=>x._id!==u._id));},children:\"Delete\"})]})]},u._id))})]})]});}","map":{"version":3,"names":["React","useEffect","useState","API","Link","jsx","_jsx","jsxs","_jsxs","UsersManagement","users","setUsers","get","then","r","data","catch","e","console","error","addUser","name","prompt","email","pwd","role","post","password","children","className","onClick","map","u","to","concat","_id","window","confirm","delete","filter","x"],"sources":["D:/3rd year work/PAWPAL/client/src/components/UsersManagement.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport API from '../api';\nimport { Link } from 'react-router-dom';\n\nexport default function UsersManagement(){\n  const [users,setUsers] = useState([]);\n  useEffect(()=> { API.get('/users').then(r=> setUsers(r.data)).catch(e=> console.error(e)); }, []);\n  const addUser = async ()=> {\n    const name = prompt('Name'); if(!name) return;\n    const email = prompt('Email'); if(!email) return;\n    const pwd = prompt('Password'); if(!pwd) return;\n    const role = prompt('Role (admin/user)', 'user');\n    await API.post('/users', { name, email, password: pwd, role });\n    const r = await API.get('/users'); setUsers(r.data);\n  };\n  return (\n    <div>\n      <h2>User Management</h2>\n      <button className=\"btn btn-success mb-3\" onClick={addUser}>Add User</button>\n      <table className=\"table\">\n        <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Actions</th></tr></thead>\n        <tbody>\n          {users.map(u=> (\n            <tr key={u._id}>\n              <td>{u.name}</td><td>{u.email}</td><td>{u.role}</td>\n              <td>\n                <Link to={`/admin/users/edit/${u._id}`} className=\"btn btn-sm btn-primary me-2\">Edit</Link>\n                <button className=\"btn btn-sm btn-danger\" onClick={async ()=> {\n                  if(!window.confirm('Delete user?')) return;\n                  await API.delete(`/users/${u._id}`);\n                  setUsers(users.filter(x=>x._id!==u._id));\n                }}>Delete</button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}