{"ast":null,"code":"import _objectSpread from\"D:/3rd year work/PAWPAL/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import API from'../api';import{getAuth}from'../auth';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PetList(){const[pets,setPets]=useState([]);const user=getAuth();const navigate=useNavigate();useEffect(()=>{API.get('/pets').then(r=>setPets(r.data)).catch(e=>console.error(e));},[]);const adopt=async id=>{if(!user){navigate('/signup');return;}try{await API.post(\"/pets/\".concat(id,\"/adopt\"));setPets(pets.map(p=>p._id===id?_objectSpread(_objectSpread({},p),{},{adopted:true,adopter:{name:user.name}}):p));alert('Adoption successful!');}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Error');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Adoptable Pets\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:pets.map(p=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[p.name,\" \",p.adopted&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-secondary\",children:\"Adopted\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",p.type]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Breed:\"}),\" \",p.breed]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Age:\"}),\" \",p.age]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Health:\"}),\" \",p.health]}),p.adopted&&p.adopter&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",children:[\"Adopted by: \",p.adopter.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-100\",disabled:p.adopted,onClick:()=>adopt(p._id),children:p.adopted?'Adopted':'Adopt'})})]})})},p._id))}),pets.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No pets found.\"})]});}","map":{"version":3,"names":["React","useEffect","useState","API","getAuth","useNavigate","jsx","_jsx","jsxs","_jsxs","PetList","pets","setPets","user","navigate","get","then","r","data","catch","e","console","error","adopt","id","post","concat","map","p","_id","_objectSpread","adopted","adopter","name","alert","err","_err$response","_err$response$data","response","message","children","className","type","breed","age","health","disabled","onClick","length"],"sources":["D:/3rd year work/PAWPAL/client/src/components/PetList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport API from '../api';\nimport { getAuth } from '../auth';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function PetList(){\n  const [pets, setPets] = useState([]);\n  const user = getAuth();\n  const navigate = useNavigate();\n\n  useEffect(()=> {\n    API.get('/pets').then(r=> setPets(r.data)).catch(e=> console.error(e));\n  },[]);\n\n  const adopt = async (id) => {\n    if(!user) { navigate('/signup'); return; }\n    try {\n      await API.post(`/pets/${id}/adopt`);\n      setPets(pets.map(p=> p._id===id ? {...p, adopted:true, adopter:{name:user.name}} : p));\n      alert('Adoption successful!');\n    } catch (err) {\n      alert(err.response?.data?.message || 'Error');\n    }\n  };\n\n  return (\n    <div>\n      <h2>Adoptable Pets</h2>\n      <div className=\"row\">\n        {pets.map(p => (\n          <div key={p._id} className=\"col-md-4 mb-3\">\n            <div className=\"card h-100 shadow-sm\">\n              <div className=\"card-body d-flex flex-column\">\n                <h5 className=\"card-title\">{p.name} {p.adopted && <span className=\"badge bg-secondary\">Adopted</span>}</h5>\n                <p className=\"mb-1\"><strong>Type:</strong> {p.type}</p>\n                <p className=\"mb-1\"><strong>Breed:</strong> {p.breed}</p>\n                <p className=\"mb-1\"><strong>Age:</strong> {p.age}</p>\n                <p className=\"mb-1\"><strong>Health:</strong> {p.health}</p>\n                {p.adopted && p.adopter && <p className=\"text-muted\">Adopted by: {p.adopter.name}</p>}\n                <div className=\"mt-auto\">\n                  <button className=\"btn btn-primary w-100\" disabled={p.adopted} onClick={()=>adopt(p._id)}>{p.adopted ? 'Adopted' : 'Adopt'}</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      {pets.length===0 && <p>No pets found.</p>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}